<!DOCTYPE html>
<html lang="{{ get_locale() }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ _('Wet Bulb Temperature') }}</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <style>
        .cookie-consent {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #343a40;
            color: white;
            text-align: center;
            padding: 10px;
            z-index: 1000;
        }
        .cookie-consent button {
            margin-left: 10px;
        }
    </style>
</head>

<body class="container mt-5">
    <div class="row">
        <div class="col-md-6">
            <h1 class="text-center">{{ _('Wet Bulb Temperature Calculator') }}</h1>
            <div class="text-right">
                <form id="language-form" method="get" action="/change-language">
                    <label for="lang">{{ _('Choose your language:') }}</label>
                    <select name="lang" id="lang" class="form-control" onchange="document.getElementById('language-form').submit();">
                        <option value="en" {% if get_locale() == 'en' %}selected{% endif %}>English</option>
                        <option value="pt" {% if get_locale() == 'pt' %}selected{% endif %}>Português</option>
                        <option value="es" {% if get_locale() == 'es' %}selected{% endif %}>Español</option>
                    </select>
                </form>
            </div>
        </div>
        <div class="col-md-6">
            <form method="POST" class="mt-4">
                <div class="form-group">
                    <label for="city">{{ _('City:') }}</label>
                    <input type="text" id="city" name="city" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary">{{ _('Get Wet Bulb Temperature') }}</button>
            </form>
        </div>
    </div>
    <div class="mt-4">
        <h2>{{ _('What is Wet Bulb Temperature?') }}</h2>
        <p>{% trans %}The wet bulb temperature is the temperature measured by a thermometer whose bulb (the sensitive part) is
            wrapped in a wet cloth. This temperature reflects the amount of moisture in the air, as the evaporation of
            water from the cloth cools the thermometer.{% endtrans %}</p>
        <h2>{{ _('What is its use?') }}</h2>
        <p>{% trans %}Wet bulb temperature is crucial for understanding thermal comfort in environments. When the relative humidity
            is high, the evaporation of sweat from the human body decreases, making the perceived temperature feel
            hotter. In extreme cases, when the wet bulb temperature is too high, the body may struggle to cool down
            effectively, which can be dangerous.{% endtrans %}</p>
        <h3>{{ _('Reference') }}</h3>
        <p>S.C. Sherwood, M. Huber, An adaptability limit to climate change due to heat stress, Proc. Natl. Acad. Sci. U.S.A.
            107 (21) 9552-9555, <a href="https://doi.org/10.1073/pnas.0913352107">DOI: 10.1073/pnas.0913352107</a> (2010).</p>

        <br><a href="https://derossimolina.com.br">© 2025 J. de Rossi molina</a></br>
    </div>
    {% if temperature %}
    <div class="mt-4">
        <h2>{{ _('Results for') }} {{ city }}, {{ country }}:</h2>
        <p>{{ _('Temperature:') }} {{ temperature }}°C</p>
        <p>{{ _('Humidity:') }} {{ humidity }}%</p>
        <p>{{ _('Wet Bulb Temperature:') }} {{ wet_bulb_temperature }}°C</p>
        {% if wet_bulb_temperature > 35 %}
        <div class="alert alert-danger" role="alert">
            <i class="fas fa-exclamation-triangle"></i> {{ _('Life risk! Seek an air-conditioned place immediately!') }}
        </div>
        {% elif wet_bulb_temperature >= 31 %}
        <div class="alert alert-warning" role="alert">
            <i class="fas fa-exclamation-circle"></i> {{ _('Danger! Seek an air-conditioned place. Risk of life for sensitive people.') }}
        </div>
        {% elif wet_bulb_temperature >= 23 %}
        <div class="alert alert-warning" role="alert">
            <i class="fas fa-exclamation-circle"></i> {{ _('Alert! Look for a cool place.') }}
        </div>
        {% else %}
        <div class="alert alert-success" role="alert">
            <i class="fas fa-leaf"></i> {{ _('Normal temperature.') }}
        </div>
        {% endif %}
    </div>
    {% elif error %}
    <div class="alert alert-danger mt-4" role="alert">
        {{ _('Error:') }} {{ error }}
    </div>
    {% endif %}

    <!-- Cookie Consent Bar -->
    <div class="cookie-consent" id="cookie-consent">
        {{ _('We use cookies to ensure you get the best experience on our website.') }}
        <button class="btn btn-primary btn-sm" onclick="acceptCookies()">{{ _('Accept') }}</button>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        function acceptCookies() {
            document.cookie = "cookies_accepted=true; path=/; max-age=" + 60*60*24*365;
            document.getElementById('cookie-consent').style.display = 'none';
        }

        window.onload = function() {
            if (document.cookie.indexOf('cookies_accepted=true') !== -1) {
                document.getElementById('cookie-consent').style.display = 'none';
            }
        }
    </script>
</body>

</html>